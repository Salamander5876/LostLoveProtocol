# –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ LLP –Ω–∞ VPS

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è LostLoveProtocol VPN –Ω–∞ VPS.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VPS —Å Debian 11/12 –∏–ª–∏ Ubuntu 20.04/22.04/24.04
- Root –¥–æ—Å—Ç—É–ø (–∏–ª–∏ sudo)
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 8443 (–∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ –≤—ã–±–æ—Ä—É)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS (5 –º–∏–Ω—É—Ç)

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS

```bash
ssh root@your-vps-ip
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Rust

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
source $HOME/.cargo/env
```

### 3. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/Salamander5876/LostLoveProtocol.git
cd LostLoveProtocol
```

### 4. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
bash fix-compilation.sh
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

```bash
cd installer
bash install.sh
```

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç systemd —Å–µ—Ä–≤–∏—Å
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç IP forwarding –∏ NAT
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç iptables

### 6. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
nano /etc/llp-server/server.toml
```

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```toml
[network]
bind_ip = "0.0.0.0"        # –°–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
bind_port = 8443           # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞

[security]
default_mimicry_profile = "vk_video"  # –∏–ª–∏ yandex_music, rutube
```

### 7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
systemctl start llp-server
systemctl enable llp-server  # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
```

### 8. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

```bash
systemctl status llp-server
journalctl -u llp-server -f  # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

### 9. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ

**UFW (Ubuntu):**
```bash
ufw allow 8443/tcp
ufw reload
```

**Firewalld (CentOS/Rocky):**
```bash
firewall-cmd --permanent --add-port=8443/tcp
firewall-cmd --reload
```

**–¢–∞–∫–∂–µ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPS (Security Groups/Firewall).**

## –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd ~/LostLoveProtocol
./target/release/llp-server --export-client-config client1.toml
```

–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–π IP VPS
- ‚úÖ –°–∫–æ–ø–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–º–∏–∫—Ä–∏–∏
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≥–æ—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –°–∫–∞—á–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ Windows

**–°–ø–æ—Å–æ–± 1: SCP (—á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É Windows)**
```powershell
scp root@your-vps-ip:~/LostLoveProtocol/client1.toml C:\LostLoveProtocol\client\configs\
```

**–°–ø–æ—Å–æ–± 2: WinSCP / FileZilla**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS —á–µ—Ä–µ–∑ WinSCP/FileZilla
2. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª `client1.toml` –∏–∑ –ø–∞–ø–∫–∏ `~/LostLoveProtocol/`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ `C:\LostLoveProtocol\client\configs\`

**–°–ø–æ—Å–æ–± 3: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ**
```bash
# –ù–∞ VPS –≤—ã–≤–µ–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
cat ~/LostLoveProtocol/client1.toml
```
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ Windows.

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (Windows)

### 1. –ù–∞ Windows –º–∞—à–∏–Ω–µ

```powershell
# –û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
cd C:\LostLoveProtocol\client
.\LLP-Client.ps1
```

### 2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è Rust
- –°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç
- –°–æ–∑–¥–∞—Å—Ç—Å—è –ø–∞–ø–∫–∞ configs

–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ –º–µ–Ω—é (–≤–≤–µ–¥–∏—Ç–µ `1`) –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å!

## –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º IP:

```bash
# –ö–ª–∏–µ–Ω—Ç 1
./target/release/llp-server --export-client-config client1.toml
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ: –∏–∑–º–µ–Ω–∏—Ç–µ ip_address –Ω–∞ 10.8.0.2

# –ö–ª–∏–µ–Ω—Ç 2
./target/release/llp-server --export-client-config client2.toml
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ: –∏–∑–º–µ–Ω–∏—Ç–µ ip_address –Ω–∞ 10.8.0.3

# –ö–ª–∏–µ–Ω—Ç 3
./target/release/llp-server --export-client-config client3.toml
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ: –∏–∑–º–µ–Ω–∏—Ç–µ ip_address –Ω–∞ 10.8.0.4
```

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ IP –∞–¥—Ä–µ—Å–∞:
```bash
nano client2.toml
```

–ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```toml
ip_address = "10.8.0.3"  # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º

```bash
# –ó–∞–ø—É—Å–∫
systemctl start llp-server

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
systemctl stop llp-server

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart llp-server

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
systemctl enable llp-server

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl disable llp-server

# –°—Ç–∞—Ç—É—Å
systemctl status llp-server

# –õ–æ–≥–∏
journalctl -u llp-server -f           # –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u llp-server --since today  # –ó–∞ —Å–µ–≥–æ–¥–Ω—è
journalctl -u llp-server -n 100        # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç
ss -tulpn | grep 8443

# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP forwarding
sysctl net.ipv4.ip_forward

# –ü—Ä–æ–≤–µ—Ä–∫–∞ iptables
iptables -t nat -L POSTROUTING -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (–≤ –ª–æ–≥–∞—Ö)
journalctl -u llp-server | grep "—Å–µ—Å—Å–∏—è"
```

### –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
ipconfig

# Ping —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ VPN
ping 10.8.0.1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞
tracert 8.8.8.8
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –°–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
journalctl -u llp-server -n 50 --no-pager

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat /etc/llp-server/server.toml

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞
ls -la /usr/local/bin/llp-server
```

### –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   ```toml
   address = "123.45.67.89:8443"  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π IP VPS
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ**
   ```bash
   ufw status | grep 8443
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç**
   ```bash
   ss -tulpn | grep 8443
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Security Group –≤ –ø–∞–Ω–µ–ª–∏ VPS**

### NAT –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP forwarding
cat /proc/sys/net/ipv4/ip_forward  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 1

# –í–∫–ª—é—á–∏—Ç—å IP forwarding
echo 1 > /proc/sys/net/ipv4/ip_forward

# –ü—Ä–æ–≤–µ—Ä–∫–∞ iptables
iptables -t nat -L -n -v

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ NAT
iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ firewall**
   ```bash
   ufw enable
   ufw allow 22/tcp    # SSH
   ufw allow 8443/tcp  # LLP
   ```

2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É**
   ```bash
   apt update && apt upgrade -y
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏**
   ```bash
   journalctl -u llp-server -f
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –º–∏–º–∏–∫—Ä–∏–∏**
   - `vk_video` - –¥–ª—è –≤–∏–¥–µ–æ —Ç—Ä–∞—Ñ–∏–∫–∞
   - `yandex_music` - –¥–ª—è –∞—É–¥–∏–æ —Ç—Ä–∞—Ñ–∏–∫–∞
   - `rutube` - –¥–ª—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞

5. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π**
   ```toml
   [network]
   max_connections = 100  # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
   ```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```toml
# –í server.toml

[network]
max_connections = 1000        # –ú–∞–∫—Å–∏–º—É–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
connection_timeout_sec = 30   # –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

[vpn]
mtu = 1400                    # –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π MTU –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–µ—Ç–µ–π
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏
top -p $(pgrep llp-server)

# –°–µ—Ç–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
iftop -i tun0
```

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp /etc/llp-server/server.toml ~/server.toml.backup

# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
mkdir ~/client-configs-backup
cp ~/LostLoveProtocol/*.toml ~/client-configs-backup/
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd ~/LostLoveProtocol
git pull origin main
bash fix-compilation.sh
cargo build --release -p llp-server
cp target/release/llp-server /usr/local/bin/
systemctl restart llp-server
```

---

## –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

```bash
# –°—Ç–∞—Ç—É—Å
systemctl status llp-server

# –õ–æ–≥–∏
journalctl -u llp-server -f

# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –∫–ª–∏–µ–Ω—Ç–∞
./target/release/llp-server --export-client-config clientN.toml

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart llp-server

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞
ss -tulpn | grep 8443
```

–ì–æ—Ç–æ–≤–æ! –í–∞—à VPN —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º! üöÄ
