# LostLoveProtocol Client для Windows

Красивый консольный VPN клиент с автоматической установкой зависимостей.

## Возможности

- ✅ Автоматическая установка Rust и сборка клиента
- ✅ Красивое консольное меню
- ✅ Управление несколькими конфигурациями
- ✅ Простое подключение к VPN
- ✅ Отображение статуса соединения

## Быстрый старт

### 1. Запуск клиента

```powershell
# Запустить PowerShell от имени администратора
cd client
.\LLP-Client.ps1
```

При первом запуске скрипт:
1. Проверит наличие Rust
2. Установит Rust, если необходимо
3. Скомпилирует LLP Client
4. Создаст папку `configs`

### 2. Добавление конфигураций

Скопируйте `.toml` конфигурационные файлы с сервера в папку `client\configs\`:

```
client\
├── LLP-Client.ps1
├── configs\
│   ├── server1.toml
│   ├── server2.toml
│   └── office.toml
└── llp-client.exe
```

### 3. Подключение

1. Запустите `LLP-Client.ps1`
2. Выберите конфигурацию из списка (введите номер)
3. Дождитесь подключения
4. Нажмите `Ctrl+C` для отключения

## Структура меню

```
╔════════════════════════════════════════════════════════════╗
║      LostLoveProtocol VPN Client v0.3.0                    ║
╚════════════════════════════════════════════════════════════╝

╔════════════════════════════════════════════════════════════╗
║                  ДОСТУПНЫЕ КОНФИГУРАЦИИ                    ║
╠════════════════════════════════════════════════════════════╣
║ [1] server1                                      2.45 KB   ║
║ [2] server2                                      2.38 KB   ║
║ [3] office                                       2.51 KB   ║
╠════════════════════════════════════════════════════════════╣
║ [R] Обновить список  [Q] Выход                             ║
╚════════════════════════════════════════════════════════════╝

Выберите конфигурацию (1-3) или действие:
```

## Получение конфигураций с сервера

### Способ 1: Экспорт через сервер

```bash
# На сервере запустите:
llp-server --export-client-config client.toml

# Скопируйте полученный файл на Windows машину в папку client\configs\
```

### Способ 2: Ручное создание

```powershell
# В папке client\configs создайте файл my-vpn.toml:
notepad configs\my-vpn.toml
```

Пример конфигурации:
```toml
[server]
address = "your-server.example.com:8443"

[vpn]
interface_name = "llp0"
ip_address = "10.8.0.2"
subnet_mask = "255.255.255.0"
mtu = 1400

[security]
mimicry_profile = "vk_video"
enable_replay_protection = true
max_packet_age_sec = 60

[logging]
level = "info"
```

## Требования

- Windows 10/11
- PowerShell 5.1 или выше
- Права администратора (для создания TUN интерфейса)
- Подключение к интернету (для установки Rust)

## Устранение неполадок

### Ошибка: "Требуются права администратора"

Запустите PowerShell от имени администратора:
1. Найдите PowerShell в меню Пуск
2. Правой кнопкой → "Запуск от имени администратора"

### Ошибка: "Не удалось собрать LLP Client"

Проверьте:
1. Установлен ли Rust: `cargo --version`
2. Доступен ли Cargo.toml в корне проекта
3. Есть ли подключение к интернету

### Конфигурации не отображаются

1. Убедитесь, что файлы имеют расширение `.toml`
2. Файлы должны находиться в папке `client\configs\`
3. Нажмите `R` для обновления списка

### Не удаётся подключиться

1. Проверьте адрес сервера в конфигурации
2. Убедитесь, что сервер запущен
3. Проверьте правила файрвола
4. Убедитесь, что профиль мимикрии совпадает с сервером

## Команды в меню

- `1-9` - Подключиться к конфигурации с указанным номером
- `R` - Обновить список конфигураций
- `Q` - Выход из программы
- `Ctrl+C` - Отключиться от VPN (во время соединения)

## Логи

Логи клиента отображаются в консоли во время подключения. Для более подробных логов измените уровень в конфигурации:

```toml
[logging]
level = "debug"  # trace, debug, info, warn, error
```
